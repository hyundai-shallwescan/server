<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
* 마이 체크리스트 MyBatis 매퍼
* @author 정은지
* @since 2024.08.28
* @version 1.0
*
* <pre>
* 수정일        	수정자        수정내용
* ==========  =========    =========
* 2024.08.28  	정은지        최초 생성
* 2024.08.28    정은지        마이 체크리스트 조회
* 2024.08.28    정은지        마이 체크리스트 아이템 추가
* </pre>
-->
<mapper namespace="com.ite.sws.domain.checklist.mapper.MyCheckListMapper">

    <!-- 마이 체크리스트 조회 -->
    <select id="selectMyCheckListByMemberId">
        SELECT MCLI.MY_CHECK_LIST_ITEM_ID,
               MCLC.NAME AS categoryName,
               MCLI.ITEM AS itemName,
               MCLI.STATUS
        FROM   MY_CHECK_LIST_ITEM MCLI
                   JOIN MY_CHECK_LIST_CATEGORY MCLC
                        ON MCLI.MY_CHECK_LIST_CATEGORY_ID = MCLC.MY_CHECK_LIST_CATEGORY_ID
        WHERE  MCLI.MEMBER_ID = #{memberId}
               AND MCLI.IS_DELETED = 0
        ORDER  BY MCLI.MY_CHECK_LIST_ITEM_ID DESC
    </select>

    <!-- 아이템 추가 -->
    <insert id="insertMyCheckListItem">
        INSERT INTO MY_CHECK_LIST_ITEM
                    (MY_CHECK_LIST_ITEM_ID,
                     MEMBER_ID,
                     MY_CHECK_LIST_CATEGORY_ID,
                     ITEM)
        VALUES      (SEQ_MY_CHECK_LIST_ITEM_ID.NEXTVAL,
                     #{memberId},
                     #{myCheckListCategoryId},
                     #{item})
    </insert>
</mapper>